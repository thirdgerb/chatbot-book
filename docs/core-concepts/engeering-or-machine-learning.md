# 工程化还是机器学习

在多轮对话机器人的实现上, 一直有工程化和机器人学习两种思路. 前者是由工程师人工编写规则, 而后者则是通过机器学习掌握多轮对话管理的策略.

现在似乎常有一种思维, 将工程化开发和机器学习对立起来, 非此即彼. 或者认为机器学习终将取代人工编程, 从而看不起工程化的方案. 

作者在这里发表一些个人观点, 仅供开发者参考. 简单而言, 作者个人认为这两个方向是相辅相成的. 思路如下: 

* 讨论的是多轮对话管理  
* 在不同条件下两种方向各有优势
* 现阶段工程化手段有其难以取代的优势
* 工程化为机器学习提供了底层抽象
* 工程化开发本质上在为机器学习提供标注
* 两种方法在未来将高度结合


## 讨论的是多轮对话管理

自然语言处理 (NLP) 有很多的技术方向, 多轮对话管理只是其中的一个方向. 

在讨论多轮对话管理是采取工程手段, 还是机器学习手段, 并不涉及到语义理解等其它问题上. 

目前用机器学习实现多轮对话管理, 主要用的是 LSTM 思路. 已有的项目例如 [chatterbot](https://github.com/gunthercox/ChatterBot) 和 [rasa x](https://rasa.com/docs/rasa-x/). 

这些项目并没有对```复杂多轮对话```问题进行完整的建模, 而是寄希望于机器学习自己能掌握. 

## 在不同条件下两种方向各有优势

机器学习依赖大量数据, 而工程化方案适合冷启动. 

开发一个全新的对话机器人, 生产语料和训练的时间, 很可能比开发规则消耗的时间更长. 而对话并不是空间有限, 规则固定的博弈游戏, 很难想象机器学习左右互博自己生产语料. 

另一方面, 要对数以千万计的客服对话语料, 进行人工梳理和工程开发, 来打造对话机器人, 也是一件不可想象的事情. 

## 现阶段工程化手段有其难以取代的优势

多轮对话管理的机器学习相关理论尚不完善. 除了缺乏明确的模型之外, 还从一点可以看出来:

大多数现有的方案, 都是以用户作为唯一输入方, 一元地影响语境的变化. 

而实际上的多轮对话, 往往有 N 个源头都可能影响对话的前进方向. 例如是否还有库存, 是否有查询的权利等等. 可能需要对大量状态进行逻辑判断.

即便有能力同步所有的状态, 和输入一起交给机器学习, 也不能保证训练样本实现了各种状态下响应逻辑的穷举.  

所以所有的多轮对话机器人方案, 都要空出各种节点用于业务逻辑的调度. 这方面的工程化需要一段时间内是难以取代的. 

## 工程化为机器学习提供了底层抽象

所有的机器学习模型, 都是基于某一个层面上的抽象开始, 例如自然语言从字符开始, 而不是从视觉上的像素开始. 

如果多轮对话管理的目标函数, 可以工程化地设计并实现出来, 就没有必要让机器学习从 "句子" 级别的语料开始去模拟. 

所有博弈游戏的AI, 想必都对游戏的规则本身做了先验的工程模型, 而不是从识别像素与移动棋子开始探索. 因此对于对话管理而言, 越优秀的工程模型越有其意义. 

## 工程化开发本质上在为机器学习提供标注

像 CommuneChatbot 这样的项目, 会把多轮对话的状态生成为一个上下文栈. 如果有一个负责对话管理的神经网络存在, 那这种上下文栈可以理解成它需要生成的目标值. 这样的神经网络只负责对话状态的变更, 不需要负责输出语料的合成. 

这样就解耦了语义理解, 回复合成, 对话状态变更三个领域.

从这个角度来看, 使用同一个对话管理模型, 工程化开发本质上就是为机器学习提供标注, 用于生产出有效的语料. 

## 两种方法在未来将高度结合

多轮对话的本质是多轮交互. 对话只是众多交互形式中的一种. 从这个角度看, "对话状态管理" 本质上是 "交互状态管理".

一旦进入 "多模态交互" , 输入的信息就不只是自然语言了, 可能还包括动作, 声音, 视觉等等. 共同作用于同一个 "交互状态管理中控". 走到这一步, 智能机器人才能初步具备雏形.

在这时候, 编程的方法就很难穷举所有的场景, 而神经网络势必成为最主要的决策机制. 早期的编程, 就相当于基础教育, 并且可能进一步演化为更高抽象层面上的 "指导", 也是不可或缺的后门. 因此把工程化手段和机器学习对立起来, 不一定是正确的思路.  






